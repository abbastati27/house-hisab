(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5865:function(e,a,s){Promise.resolve().then(s.bind(s,1333))},1333:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return o}});var t=s(7437),l=s(932);function n(e){let{data:a,formatValue:s}=e,l=Math.max(1,...a.map(e=>e.value));return(0,t.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,t.jsx)("div",{className:"min-w-0 flex-1 truncate text-sm",children:e.label}),(0,t.jsx)("div",{className:"flex-1 bg-slate-200 h-3 rounded overflow-hidden",children:(0,t.jsx)("div",{className:"bg-blue-600 h-3",style:{width:"".concat(e.value/l*100,"%")}})}),(0,t.jsx)("div",{className:"shrink-0 text-right text-sm tabular-nums whitespace-nowrap",children:s?s(e.value):e.value})]},e.label))})}function i(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e/100)}async function r(e){let a=await fetch("http://localhost:8000"+e,{cache:"no-store"});if(!a.ok)throw Error("Failed");return a.json()}function o(){let{data:e}=(0,l.a)({queryKey:["funds"],queryFn:()=>r("/api/v1/funds")}),{data:a}=(0,l.a)({queryKey:["summary","posting=false"],queryFn:()=>r("/api/v1/reports/summary?posting=false")}),{data:s}=(0,l.a)({queryKey:["top-categories","posting=false"],queryFn:()=>r("/api/v1/reports/top-categories?limit=8&posting=false")}),{data:o}=(0,l.a)({queryKey:["top-people","posting=false"],queryFn:()=>r("/api/v1/reports/top-people?limit=8&posting=false")});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(c,{title:"Cash",value:e?i(e.cash):"—"}),(0,t.jsx)(c,{title:"Online A",value:e?i(e.online_a):"—"}),(0,t.jsx)(c,{title:"Online Y",value:e?i(e.online_y):"—"}),(0,t.jsx)(c,{title:"Total Funds",value:e?i(e.total):"—"})]}),a&&0!==a.discrepancy&&(0,t.jsxs)("div",{className:"p-3 rounded bg-amber-100 border border-amber-300 text-amber-900",children:["Equation discrepancy detected: ",i(a.discrepancy)]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(c,{title:"Totals",children:(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["Contributions: ",a?i(a.total_contributions):"—"]}),(0,t.jsxs)("li",{children:["Income: ",a?i(a.total_income):"—"]}),(0,t.jsxs)("li",{children:["Expenses: ",a?i(a.total_expenses):"—"]})]})}),(0,t.jsx)(c,{title:"Top Categories",children:s?(0,t.jsx)(n,{formatValue:e=>i(e),data:s.map(e=>{var a;return{label:null!==(a=e.name)&&void 0!==a?a:"Unknown",value:e.total_paise}})}):(0,t.jsx)("div",{children:"—"})}),(0,t.jsx)(c,{title:"Top People",children:o?(0,t.jsx)(n,{formatValue:e=>i(e),data:o.map(e=>{var a;return{label:null!==(a=e.name)&&void 0!==a?a:"Unknown",value:e.total_paise}})}):(0,t.jsx)("div",{children:"—"})})]})]})}function c(e){return(0,t.jsxs)("div",{className:"rounded border bg-white p-3 shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm text-slate-600",children:e.title}),e.value&&(0,t.jsx)("div",{className:"text-xl font-semibold",children:e.value}),e.children]})}}},function(e){e.O(0,[336,932,971,23,744],function(){return e(e.s=5865)}),_N_E=e.O()}]);